<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Intel B580 显卡 Linux 使用体验 | Bluempty</title>
<meta name=keywords content="硬件,Linux"><meta name=description content="想着需要给自己买张显卡了，原本打算等着核显继续迭代，但感觉还是太慢了。
我的要求不太高，能 1080p 60fps 全高画质玩大部分游戏，能跑一些 ai 应用就更好了。
原本打算 4060 的，但是显存有点小了，最近刚好 Intel 发了 B580，然后就决定是它了。
对 Intel 印象还是不错，虽然最近发展不太行，不过那也不影响，现有的相关设施已经够用了。
同时也一直打算试试 oneapi，我还挺看好 SYCL 的，就是不知道何时才能进 upstream llvm。"><meta name=author content="hypengw"><link rel=canonical href=https://blog.bluempty.com/post/b580/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.bluempty.com/images/profile.webp><link rel=icon type=image/png sizes=16x16 href=https://blog.bluempty.com/images/profile.webp><link rel=icon type=image/png sizes=32x32 href=https://blog.bluempty.com/images/profile.webp><link rel=apple-touch-icon href=https://blog.bluempty.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.bluempty.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://blog.bluempty.com/post/b580/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=/css/dimbox.min.css><meta property="og:url" content="https://blog.bluempty.com/post/b580/"><meta property="og:site_name" content="Bluempty"><meta property="og:title" content="Intel B580 显卡 Linux 使用体验"><meta property="og:description" content="想着需要给自己买张显卡了，原本打算等着核显继续迭代，但感觉还是太慢了。
我的要求不太高，能 1080p 60fps 全高画质玩大部分游戏，能跑一些 ai 应用就更好了。
原本打算 4060 的，但是显存有点小了，最近刚好 Intel 发了 B580，然后就决定是它了。
对 Intel 印象还是不错，虽然最近发展不太行，不过那也不影响，现有的相关设施已经够用了。
同时也一直打算试试 oneapi，我还挺看好 SYCL 的，就是不知道何时才能进 upstream llvm。"><meta property="og:locale" content="zh-hans"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-01-07T00:44:03+08:00"><meta property="article:modified_time" content="2025-01-07T00:44:03+08:00"><meta property="article:tag" content="硬件"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="Intel B580 显卡 Linux 使用体验"><meta name=twitter:description content="想着需要给自己买张显卡了，原本打算等着核显继续迭代，但感觉还是太慢了。
我的要求不太高，能 1080p 60fps 全高画质玩大部分游戏，能跑一些 ai 应用就更好了。
原本打算 4060 的，但是显存有点小了，最近刚好 Intel 发了 B580，然后就决定是它了。
对 Intel 印象还是不错，虽然最近发展不太行，不过那也不影响，现有的相关设施已经够用了。
同时也一直打算试试 oneapi，我还挺看好 SYCL 的，就是不知道何时才能进 upstream llvm。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.bluempty.com/post/"},{"@type":"ListItem","position":2,"name":"Intel B580 显卡 Linux 使用体验","item":"https://blog.bluempty.com/post/b580/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Intel B580 显卡 Linux 使用体验","name":"Intel B580 显卡 Linux 使用体验","description":"想着需要给自己买张显卡了，原本打算等着核显继续迭代，但感觉还是太慢了。\n我的要求不太高，能 1080p 60fps 全高画质玩大部分游戏，能跑一些 ai 应用就更好了。\n原本打算 4060 的，但是显存有点小了，最近刚好 Intel 发了 B580，然后就决定是它了。\n对 Intel 印象还是不错，虽然最近发展不太行，不过那也不影响，现有的相关设施已经够用了。\n同时也一直打算试试 oneapi，我还挺看好 SYCL 的，就是不知道何时才能进 upstream llvm。\n","keywords":["硬件","Linux"],"articleBody":"想着需要给自己买张显卡了，原本打算等着核显继续迭代，但感觉还是太慢了。\n我的要求不太高，能 1080p 60fps 全高画质玩大部分游戏，能跑一些 ai 应用就更好了。\n原本打算 4060 的，但是显存有点小了，最近刚好 Intel 发了 B580，然后就决定是它了。\n对 Intel 印象还是不错，虽然最近发展不太行，不过那也不影响，现有的相关设施已经够用了。\n同时也一直打算试试 oneapi，我还挺看好 SYCL 的，就是不知道何时才能进 upstream llvm。\n抱着还需要废心思折腾的预期，结果拿到就能直接在 Linux 桌面下用了。\n基本配置 Specifications Xe-cores 20 Graphics Clock 2670 MHz Memory 12 GB GDDR6 Graphics Memory Interface 192 bit Graphics Memory Bandwidth 456 GB/s GPU Peak TOPS (Int8) 233 TBP 190 W 系统环境 kernal: 6.12.11\nmesa: 24.3.4\nos: fedora 41\negpu: m2 to oculink\nPCIe Gen 1x1 lspci 对于 Intel Arc 显卡总是显示 PCIe 1x1 的速度\n这似乎是预期行为，并不是实际的速度，Troubleshooting， Intel Support Forums\n具体的连接速度可以用 xpumanager 来测试\nResizable BAR Intel 说明 Arc 显卡需要开启 Resizable BAR 才能完全发挥性能\n查了下资料，Base Address Register 用于把 pcie 设备的资源映射到系统内存地址，内部有一套同步逻辑\n台式主板一般有直接的选项开启\n笔记本和mini主机需要把分配给核显的内存开到 4G 以上\n$ sudo lspci -s 03:00.0 -vv | grep -i bar Capabilities: [420 v1] Physical Resizable BAR BAR 2: current size: 16GB, supported: 256MB 512MB 1GB 2GB 4GB 8GB 16GB AI 应用 llama.cpp 支持 SYCL 和 Vulkan 后端，我写好了 Dockerfile.\nSYCL 版本需要安装 intel oneapi，然后在构建时挂载进容器\nllama-bench -ngl 99 结果(统计参考)：\nSYCL\nmodel size params backend ngl test t/s llama 7B Q4_0 3.56 GiB 6.74 B SYCL 99 pp512 1982.69 ± 4.02 llama 7B Q4_0 3.56 GiB 6.74 B SYCL 99 tg128 34.83 ± 0.11 Vulkan\nggml_vulkan: 0 = Intel(R) Graphics (BMG G21) (Intel open-source Mesa driver) | uma: 0 | fp16: 1 | warp size: 32 | matrix cores: none model size params backend ngl test t/s llama 7B Q4_0 3.56 GiB 6.74 B Vulkan 99 pp512 175.56 ± 2.65 llama 7B Q4_0 3.56 GiB 6.74 B Vulkan 99 tg128 44.12 ± 0.09 ollama ollama 官方没有给 SYCL 支持说明，但是它的后端是 llama.cpp, 改改就能运行了。\n配合 open-webui，能建立知识库和联网搜索，还挺不错。\nDockerfile\nOLLAMA_GPU_OVERHEAD\n保留的不使用的显存(bytes)，一开始我还以为是最多能使用的显存，发现 ollama 怎么不使用 gpu，才发现是搞反了\n不知道出于什么原因，linux 这边没有有效手段获取 ARC GPU 可用的 vram，为了避免 oom，这个必须配置\nollama ps\n可以看到每个模型的运行情况\nTODO\n游戏 mc 平均FPS: 280\nmc 1.21.4 1080p Iris + Sodium(默认配置) BSL shader 8.4 High 赛博朋克 2077 需要 24.3.4 及以上的 mesa，不然会有 shader 渲染错误\n光追似乎不工作\n1080p 最高画质\n平均FPS: 68\n最低FPS: 56\n最高FPS: 82\n极限竞速地平线 4 博主 4 还没玩完，并没有买 5\n1080p 超高\n平均FPS：136\n最低FPS: 119\n最高FPS: 166\n媒体 需要 24.4.4 及以上的 intel media-driver\nmedia features 文档，b580 是 BMG\nMedia Stack 单纯编解码，大部分程序都是直接走 libva 的接口，只需要安装 media-driver 就可以了\noneVPL 是结合 GPGPU 和 VAAPI 来做 Video Processing\nMeisaSdk 是旧显卡用的，在被 oneVPL 逐渐替代\n解码 2160p 120fps hevc main10 mmd: 5路\nav1 main 和 hevc rext 422 也是5路\n2160p(21:9) 120fps hevc main mmd: 4路\n编码 原视频为上面测试解码的两个视频\n分辨率 帧率 编码 格式 编码配置 编码速率 2160p(21:9) 120 hevc p010 main10,QVBR,qp:12 1.04x 2160p 120 hevc p010 main10,QVBR,qp:12 1.37x 2160p 120 hevc y210(422) rext,QVBR,qp:12 1.32x 2160p 120 av1 p010 main,VBR,crf:24 1.37x 2160p(21:9) 60 hevc p010 main10,QVBR,qp:12 2.06x 2160p 60 hevc p010 main10,QVBR,qp:12 1.81x 2160p 60 av1 p010 main,VBR,crf:24 1.81x ffmpeg -hwaccel vaapi -hwaccel_output_format vaapi -i input.mp4 -vf 'scale_vaapi=format=p010' -c:v hevc_vaapi -profile:v main10 -tier high -rc_mode QVBR -qp 12 -b:v 40M output3.mp4 性能测试 GravityMark 统计网站\nVulkan 1920x1080 Asteroids: 200000 Score: 24896 Opengl 1920x1080 Asteroids: 200000 Score: 20477 clpeak 统计网站\nSingle-precision compute 和 4060 差不多\nHalf-precision compute 网站没有数据，看下面 vkpeak, 和 4070 super 差不多\nInteger compute 差不多 4060 的一半\n$ ./clpeak Platform: Intel(R) OpenCL Graphics Device: Intel(R) Graphics [0xe20b] Driver version : 24.35.30872.32 (Linux x64) Compute units : 160 Clock frequency : 2850 MHz Global memory bandwidth (GBPS) float : 417.71 float2 : 429.27 float4 : 434.78 float8 : 446.30 float16 : 449.03 Single-precision compute (GFLOPS) float : 14083.21 float2 : 14401.35 float4 : 14096.05 float8 : 12096.30 float16 : 13596.31 Half-precision compute (GFLOPS) half : 24831.84 half2 : 28076.27 half4 : 28199.86 half8 : 27916.44 half16 : 27768.14 Double-precision compute (GFLOPS) double : 891.12 double2 : 893.37 double4 : 898.90 double8 : 888.26 double16 : 842.54 Integer compute (GIOPS) int : 4433.77 int2 : 4461.17 int4 : 4456.32 int8 : 4364.93 int16 : 4192.12 Integer compute Fast 24bit (GIOPS) int : 4473.72 int2 : 4448.66 int4 : 4470.87 int8 : 4379.65 int16 : 4225.50 Integer char (8bit) compute (GIOPS) char : 21487.19 char2 : 26128.29 char4 : 25867.58 char8 : 25227.17 char16 : 24600.19 Integer short (16bit) compute (GIOPS) short : 20924.35 short2 : 26189.49 short4 : 25835.04 short8 : 25127.30 short16 : 23874.53 Transfer bandwidth (GBPS) enqueueWriteBuffer : 6.77 enqueueReadBuffer : 6.71 enqueueWriteBuffer non-blocking : 7.08 enqueueReadBuffer non-blocking : 7.01 enqueueMapBuffer(for read) : 6.97 memcpy from mapped ptr : 26.67 enqueueUnmap(after write) : 7.20 memcpy to mapped ptr : 26.41 Kernel launch latency : 49.15 us vkpeak 统计网站\nfp32 和 4060 差不多\nint32 特别差\n其他的居然能跑到和 4070 super 差不多\n$ ./vkpeak 0 device = Intel(R) Graphics (BMG G21) fp32-scalar = 7277.51 GFLOPS fp32-vec4 = 10706.95 GFLOPS fp16-scalar = 21068.69 GFLOPS fp16-vec4 = 23754.69 GFLOPS fp16-matrix = 0.00 GFLOPS fp64-scalar = 799.67 GFLOPS fp64-vec4 = 779.47 GFLOPS int32-scalar = 3024.92 GIOPS int32-vec4 = 3102.06 GIOPS int16-scalar = 10801.67 GIOPS int16-vec4 = 13525.01 GIOPS VkFFT 统计网站\nsingle precision $ ./VkFFT_TestSuite -vkfft 0 0 - VkFFT FFT + iFFT C2C benchmark 1D batched in single precision VkFFT System: 3 8x16777216 Buffer: 1024 MB avg_time_per_step: 10.984 ms std_error: 0.054 num_iter: 3 benchmark: 95462 bandwidth: 364.2 VkFFT System: 4 16x8388608 Buffer: 1024 MB avg_time_per_step: 11.302 ms std_error: 0.378 num_iter: 3 benchmark: 92774 bandwidth: 353.9 VkFFT System: 5 32x4194304 Buffer: 1024 MB avg_time_per_step: 11.164 ms std_error: 0.332 num_iter: 3 benchmark: 93921 bandwidth: 358.3 VkFFT System: 6 64x2097152 Buffer: 1024 MB avg_time_per_step: 10.819 ms std_error: 0.024 num_iter: 3 benchmark: 96918 bandwidth: 369.7 VkFFT System: 7 128x1048576 Buffer: 1024 MB avg_time_per_step: 10.816 ms std_error: 0.022 num_iter: 3 benchmark: 96946 bandwidth: 369.8 VkFFT System: 8 256x524288 Buffer: 1024 MB avg_time_per_step: 10.918 ms std_error: 0.016 num_iter: 3 benchmark: 96037 bandwidth: 366.4 VkFFT System: 9 512x262144 Buffer: 1024 MB avg_time_per_step: 10.963 ms std_error: 0.045 num_iter: 3 benchmark: 95645 bandwidth: 364.9 VkFFT System: 10 1024x131072 Buffer: 1024 MB avg_time_per_step: 10.990 ms std_error: 0.052 num_iter: 3 benchmark: 95414 bandwidth: 364.0 VkFFT System: 11 2048x65536 Buffer: 1024 MB avg_time_per_step: 11.018 ms std_error: 0.067 num_iter: 3 benchmark: 95172 bandwidth: 363.1 VkFFT System: 12 4096x32768 Buffer: 1024 MB avg_time_per_step: 10.981 ms std_error: 0.080 num_iter: 3 benchmark: 95486 bandwidth: 364.3 VkFFT System: 13 8192x16384 Buffer: 1024 MB avg_time_per_step: 11.638 ms std_error: 1.004 num_iter: 3 benchmark: 90095 bandwidth: 343.7 half precision $ ./VkFFT_TestSuite -vkfft 2 2 - VkFFT FFT + iFFT C2C benchmark 1D batched in half precision VkFFT System: 3 8x16777216 Buffer: 512 MB avg_time_per_step: 5.755 ms std_error: 0.054 num_iter: 2 benchmark: 182207 bandwidth: 347.5 VkFFT System: 4 16x8388608 Buffer: 512 MB avg_time_per_step: 5.855 ms std_error: 0.018 num_iter: 2 benchmark: 179090 bandwidth: 341.6 VkFFT System: 5 32x4194304 Buffer: 512 MB avg_time_per_step: 6.394 ms std_error: 0.066 num_iter: 2 benchmark: 163989 bandwidth: 312.8 VkFFT System: 6 64x2097152 Buffer: 512 MB avg_time_per_step: 6.731 ms std_error: 0.127 num_iter: 2 benchmark: 155790 bandwidth: 297.1 VkFFT System: 7 128x1048576 Buffer: 512 MB avg_time_per_step: 7.127 ms std_error: 0.059 num_iter: 2 benchmark: 147137 bandwidth: 280.6 VkFFT System: 8 256x524288 Buffer: 512 MB avg_time_per_step: 5.517 ms std_error: 0.100 num_iter: 2 benchmark: 190062 bandwidth: 362.5 VkFFT System: 9 512x262144 Buffer: 512 MB avg_time_per_step: 5.403 ms std_error: 0.004 num_iter: 2 benchmark: 194084 bandwidth: 370.2 VkFFT System: 10 1024x131072 Buffer: 512 MB avg_time_per_step: 5.575 ms std_error: 0.168 num_iter: 2 benchmark: 188085 bandwidth: 358.7 VkFFT System: 11 2048x65536 Buffer: 512 MB avg_time_per_step: 5.560 ms std_error: 0.126 num_iter: 2 benchmark: 188598 bandwidth: 359.7 VkFFT System: 12 4096x32768 Buffer: 512 MB avg_time_per_step: 5.590 ms std_error: 0.108 num_iter: 2 benchmark: 187580 bandwidth: 357.8 VkFFT System: 13 8192x16384 Buffer: 512 MB avg_time_per_step: 10.461 ms std_error: 1.182 num_iter: 2 benchmark: 100241 bandwidth: 191.2 ","wordCount":"1935","inLanguage":"zh","datePublished":"2025-01-07T00:44:03+08:00","dateModified":"2025-01-07T00:44:03+08:00","author":{"@type":"Person","name":"hypengw"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bluempty.com/post/b580/"},"publisher":{"@type":"Organization","name":"Bluempty","logo":{"@type":"ImageObject","url":"https://blog.bluempty.com/images/profile.webp"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.bluempty.com/ accesskey=h title="Bluempty (Alt + H)">Bluempty</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.bluempty.com/en/ title=En aria-label=En>En</a></li></ul></div></div><ul id=menu><li><a href=https://blog.bluempty.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.bluempty.com/tags/ title=标签><span>标签</span></a></li><li><a href=https://blog.bluempty.com/search/ title=搜索><span>搜索</span></a></li><li><a href=https://blog.bluempty.com/friends/ title=友链><span>友链</span></a></li><li><a href=https://blog.bluempty.com/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.bluempty.com/>主页</a>&nbsp;»&nbsp;<a href=https://blog.bluempty.com/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Intel B580 显卡 Linux 使用体验</h1><div class=post-meta><span title='2025-01-07 00:44:03 +0800 +0800'>一月 7, 2025</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;hypengw</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae aria-label=基本配置>基本配置</a></li><li><a href=#%e7%b3%bb%e7%bb%9f%e7%8e%af%e5%a2%83 aria-label=系统环境>系统环境</a><ul><li><a href=#pcie-gen-1x1 aria-label="PCIe Gen 1x1">PCIe Gen 1x1</a></li><li><a href=#resizable-bar aria-label="Resizable BAR">Resizable BAR</a></li></ul></li><li><a href=#ai-%e5%ba%94%e7%94%a8 aria-label="AI 应用">AI 应用</a><ul><li><a href=#llamacpp aria-label=llama.cpp>llama.cpp</a></li><li><a href=#ollama aria-label=ollama>ollama</a></li></ul></li><li><a href=#%e6%b8%b8%e6%88%8f aria-label=游戏>游戏</a><ul><li><a href=#mc aria-label=mc>mc</a></li><li><a href=#%e8%b5%9b%e5%8d%9a%e6%9c%8b%e5%85%8b-2077 aria-label="赛博朋克 2077">赛博朋克 2077</a></li><li><a href=#%e6%9e%81%e9%99%90%e7%ab%9e%e9%80%9f%e5%9c%b0%e5%b9%b3%e7%ba%bf-4 aria-label="极限竞速地平线 4">极限竞速地平线 4</a></li></ul></li><li><a href=#%e5%aa%92%e4%bd%93 aria-label=媒体>媒体</a><ul><li><a href=#media-stack aria-label="Media Stack">Media Stack</a></li><li><a href=#%e8%a7%a3%e7%a0%81 aria-label=解码>解码</a></li><li><a href=#%e7%bc%96%e7%a0%81 aria-label=编码>编码</a></li></ul></li><li><a href=#%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95 aria-label=性能测试>性能测试</a><ul><li><a href=#gravitymark aria-label=GravityMark>GravityMark</a></li><li><a href=#clpeak aria-label=clpeak>clpeak</a></li><li><a href=#vkpeak aria-label=vkpeak>vkpeak</a></li><li><a href=#vkfft aria-label=VkFFT>VkFFT</a></li></ul></li></ul></div></details></div><div class=post-content><p>想着需要给自己买张显卡了，原本打算等着核显继续迭代，但感觉还是太慢了。<br>我的要求不太高，能 1080p 60fps 全高画质玩大部分游戏，能跑一些 ai 应用就更好了。</p><p>原本打算 4060 的，但是显存有点小了，最近刚好 Intel 发了 B580，然后就决定是它了。<br>对 Intel 印象还是不错，虽然最近发展不太行，不过那也不影响，现有的相关设施已经够用了。<br>同时也一直打算试试 oneapi，我还挺看好 SYCL 的，就是不知道何时才能进 upstream llvm。</p><p>抱着还需要废心思折腾的预期，结果拿到就能直接在 Linux 桌面下用了。</p><h2 id=基本配置>基本配置<a hidden class=anchor aria-hidden=true href=#基本配置>#</a></h2><table><thead><tr><th style=text-align:left>Specifications</th><th style=text-align:left></th></tr></thead><tbody><tr><td style=text-align:left>Xe-cores</td><td style=text-align:left>20</td></tr><tr><td style=text-align:left>Graphics Clock</td><td style=text-align:left>2670 MHz</td></tr><tr><td style=text-align:left>Memory</td><td style=text-align:left>12 GB GDDR6</td></tr><tr><td style=text-align:left>Graphics Memory Interface</td><td style=text-align:left>192 bit</td></tr><tr><td style=text-align:left>Graphics Memory Bandwidth</td><td style=text-align:left>456 GB/s</td></tr><tr><td style=text-align:left>GPU Peak TOPS (Int8)</td><td style=text-align:left>233</td></tr><tr><td style=text-align:left>TBP</td><td style=text-align:left>190 W</td></tr></tbody></table><h2 id=系统环境>系统环境<a hidden class=anchor aria-hidden=true href=#系统环境>#</a></h2><p>kernal: 6.12.11<br>mesa: 24.3.4<br>os: fedora 41<br>egpu: m2 to oculink</p><h3 id=pcie-gen-1x1>PCIe Gen 1x1<a hidden class=anchor aria-hidden=true href=#pcie-gen-1x1>#</a></h3><p><code>lspci</code> 对于 Intel Arc 显卡总是显示 PCIe 1x1 的速度<br>这似乎是预期行为，并不是实际的速度，<a href=https://www.intel.com/content/www/us/en/support/articles/000094587/graphics.html>Troubleshooting</a>， <a href=https://community.intel.com/t5/Graphics/Intel-Arc-A770-PCIe-Speed-2-5GT-s-Width-x1/td-p/1455448>Intel Support Forums</a></p><p>具体的连接速度可以用 <a href=https://github.com/intel/xpumanager>xpumanager</a> 来测试</p><h3 id=resizable-bar>Resizable <strong>BAR</strong><a hidden class=anchor aria-hidden=true href=#resizable-bar>#</a></h3><p>Intel 说明 Arc 显卡需要开启 <strong>Resizable BAR</strong> 才能完全发挥性能<br>查了下资料，<strong>Base Address Register</strong> 用于把 pcie 设备的资源映射到系统内存地址，内部有一套同步逻辑</p><p>台式主板一般有直接的选项开启<br>笔记本和mini主机需要把分配给核显的内存开到 4G 以上</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ sudo lspci -s 03:00.0 -vv | grep -i bar 
</span></span><span class=line><span class=cl>     Capabilities: [420 v1] Physical Resizable BAR 
</span></span><span class=line><span class=cl>         BAR 2: current size: 16GB, supported: 256MB 512MB 1GB 2GB 4GB 8GB 16GB
</span></span></code></pre></div><h2 id=ai-应用>AI 应用<a hidden class=anchor aria-hidden=true href=#ai-应用>#</a></h2><h3 id=llamacpp>llama.cpp<a hidden class=anchor aria-hidden=true href=#llamacpp>#</a></h3><p>支持 SYCL 和 Vulkan 后端，我写好了 <a href=https://github.com/hypengw/dockerfiles/tree/main/llama.cpp>Dockerfile</a>.<br>SYCL 版本需要安装 intel oneapi，然后在构建时挂载进容器<br><code>llama-bench -ngl 99</code> 结果(<a href=https://github.com/ggerganov/llama.cpp/discussions/10879>统计参考</a>)：</p><ul><li><p>SYCL</p><table><thead><tr><th style=text-align:left>model</th><th style=text-align:right>size</th><th style=text-align:right>params</th><th style=text-align:left>backend</th><th style=text-align:right>ngl</th><th style=text-align:right>test</th><th style=text-align:right>t/s</th></tr></thead><tbody><tr><td style=text-align:left>llama 7B Q4_0</td><td style=text-align:right>3.56 GiB</td><td style=text-align:right>6.74 B</td><td style=text-align:left>SYCL</td><td style=text-align:right>99</td><td style=text-align:right>pp512</td><td style=text-align:right>1982.69 ± 4.02</td></tr><tr><td style=text-align:left>llama 7B Q4_0</td><td style=text-align:right>3.56 GiB</td><td style=text-align:right>6.74 B</td><td style=text-align:left>SYCL</td><td style=text-align:right>99</td><td style=text-align:right>tg128</td><td style=text-align:right>34.83 ± 0.11</td></tr></tbody></table></li><li><p>Vulkan</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ggml_vulkan: 0 = Intel(R) Graphics (BMG G21) (Intel open-source Mesa driver) | uma: 0 | fp16: 1 | warp size: 32 | matrix cores: none 
</span></span></code></pre></div><table><thead><tr><th style=text-align:left>model</th><th style=text-align:right>size</th><th style=text-align:right>params</th><th style=text-align:left>backend</th><th style=text-align:right>ngl</th><th style=text-align:right>test</th><th style=text-align:right>t/s</th></tr></thead><tbody><tr><td style=text-align:left>llama 7B Q4_0</td><td style=text-align:right>3.56 GiB</td><td style=text-align:right>6.74 B</td><td style=text-align:left>Vulkan</td><td style=text-align:right>99</td><td style=text-align:right>pp512</td><td style=text-align:right>175.56 ± 2.65</td></tr><tr><td style=text-align:left>llama 7B Q4_0</td><td style=text-align:right>3.56 GiB</td><td style=text-align:right>6.74 B</td><td style=text-align:left>Vulkan</td><td style=text-align:right>99</td><td style=text-align:right>tg128</td><td style=text-align:right>44.12 ± 0.09</td></tr></tbody></table></li></ul><h3 id=ollama>ollama<a hidden class=anchor aria-hidden=true href=#ollama>#</a></h3><p>ollama 官方没有给 SYCL 支持说明，但是它的后端是 llama.cpp, 改改就能运行了。<br>配合 <a href=https://github.com/open-webui/open-webui>open-webui</a>，能建立知识库和联网搜索，还挺不错。<br><a href=https://github.com/hypengw/dockerfiles/tree/main/ollama>Dockerfile</a></p><ul><li><p><code>OLLAMA_GPU_OVERHEAD</code><br>保留的不使用的显存(bytes)，一开始我还以为是最多能使用的显存，发现 ollama 怎么不使用 gpu，才发现是搞反了<br>不知道出于什么原因，linux 这边没有有效手段获取 ARC GPU 可用的 vram，为了避免 oom，这个必须配置</p></li><li><p><code>ollama ps</code><br>可以看到每个模型的运行情况</p></li></ul><p>TODO</p><h2 id=游戏>游戏<a hidden class=anchor aria-hidden=true href=#游戏>#</a></h2><h3 id=mc>mc<a hidden class=anchor aria-hidden=true href=#mc>#</a></h3><p>平均FPS: 280</p><ul><li>mc 1.21.4 1080p</li><li>Iris + Sodium(默认配置)</li><li>BSL shader 8.4 High</li></ul><p><a href=https://pan.bluempty.com/d/Public/Blog/b580/mc.webp data-dimbox data-dimbox-caption=mc><img alt=mc height=% loading=lazy src=https://pan.bluempty.com/d/Public/Blog/b580/mc.webp width=%></a></p><h3 id=赛博朋克-2077>赛博朋克 2077<a hidden class=anchor aria-hidden=true href=#赛博朋克-2077>#</a></h3><p>需要 24.3.4 及以上的 mesa，不然会有 shader 渲染错误<br>光追似乎不工作</p><p>1080p 最高画质<br>平均FPS: 68<br>最低FPS: 56<br>最高FPS: 82</p><p><a href=https://pan.bluempty.com/d/Public/Blog/b580/2077.webp data-dimbox data-dimbox-caption=2077><img alt=2077 height=% loading=lazy src=https://pan.bluempty.com/d/Public/Blog/b580/2077.webp width=%></a></p><h3 id=极限竞速地平线-4>极限竞速地平线 4<a hidden class=anchor aria-hidden=true href=#极限竞速地平线-4>#</a></h3><p>博主 4 还没玩完，并没有买 5</p><p>1080p 超高<br>平均FPS：136<br>最低FPS: 119<br>最高FPS: 166</p><p><a href=https://pan.bluempty.com/d/Public/Blog/b580/forza_horizon_4.webp data-dimbox data-dimbox-caption=极限竞速地平线4><img alt=极限竞速地平线4 height=% loading=lazy src=https://pan.bluempty.com/d/Public/Blog/b580/forza_horizon_4.webp width=%></a></p><h2 id=媒体>媒体<a hidden class=anchor aria-hidden=true href=#媒体>#</a></h2><p>需要 24.4.4 及以上的 <a href=https://github.com/intel/media-driver.git>intel media-driver</a><br><a href=https://github.com/intel/media-driver/blob/master/docs/media_features.md>media features 文档</a>，b580 是 BMG</p><h3 id=media-stack>Media Stack<a hidden class=anchor aria-hidden=true href=#media-stack>#</a></h3><p>单纯编解码，大部分程序都是直接走 libva 的接口，只需要安装 media-driver 就可以了<br>oneVPL 是结合 GPGPU 和 VAAPI 来做 Video Processing<br>MeisaSdk 是旧显卡用的，在被 oneVPL 逐渐替代</p><p><a href=https://user-images.githubusercontent.com/34122804/167241733-4904858c-93c5-4e6b-bf2b-8a1b26f1e967.png data-dimbox data-dimbox-caption="Media Stack"><img alt="Media Stack" height=% loading=lazy src=https://user-images.githubusercontent.com/34122804/167241733-4904858c-93c5-4e6b-bf2b-8a1b26f1e967.png width=%></a></p><h3 id=解码>解码<a hidden class=anchor aria-hidden=true href=#解码>#</a></h3><p>2160p 120fps hevc main10 <a href="https://steamcommunity.com/sharedfiles/filedetails/?l=schinese&id=2156267111">mmd</a>: <strong>5路</strong><br>av1 main 和 hevc rext 422 也是5路</p><p><a href=https://pan.bluempty.com/d/Public/Blog/b580/decoder.webp data-dimbox data-dimbox-caption="初音 - 拼湊的斷音"><img alt="初音 - 拼湊的斷音" height=% loading=lazy src=https://pan.bluempty.com/d/Public/Blog/b580/decoder.webp width=%></a></p><p>2160p(21:9) 120fps hevc main <a href=https://www.bilibili.com/video/BV16m411Q7pa/>mmd</a>: <strong>4路</strong></p><p><a href=https://pan.bluempty.com/d/Public/Blog/b580/decoder_21_9.webp data-dimbox data-dimbox-caption=世界第一的公主殿下><img alt=世界第一的公主殿下 height=% loading=lazy src=https://pan.bluempty.com/d/Public/Blog/b580/decoder_21_9.webp width=%></a></p><h3 id=编码>编码<a hidden class=anchor aria-hidden=true href=#编码>#</a></h3><p>原视频为上面测试解码的两个视频</p><table><thead><tr><th style=text-align:left>分辨率</th><th style=text-align:left>帧率</th><th style=text-align:left>编码</th><th style=text-align:left>格式</th><th style=text-align:left>编码配置</th><th style=text-align:left>编码速率</th></tr></thead><tbody><tr><td style=text-align:left>2160p(21:9)</td><td style=text-align:left>120</td><td style=text-align:left>hevc</td><td style=text-align:left>p010</td><td style=text-align:left>main10,QVBR,qp:12</td><td style=text-align:left>1.04x</td></tr><tr><td style=text-align:left>2160p</td><td style=text-align:left>120</td><td style=text-align:left>hevc</td><td style=text-align:left>p010</td><td style=text-align:left>main10,QVBR,qp:12</td><td style=text-align:left>1.37x</td></tr><tr><td style=text-align:left>2160p</td><td style=text-align:left>120</td><td style=text-align:left>hevc</td><td style=text-align:left>y210(422)</td><td style=text-align:left>rext,QVBR,qp:12</td><td style=text-align:left>1.32x</td></tr><tr><td style=text-align:left>2160p</td><td style=text-align:left>120</td><td style=text-align:left>av1</td><td style=text-align:left>p010</td><td style=text-align:left>main,VBR,crf:24</td><td style=text-align:left>1.37x</td></tr><tr><td style=text-align:left>2160p(21:9)</td><td style=text-align:left>60</td><td style=text-align:left>hevc</td><td style=text-align:left>p010</td><td style=text-align:left>main10,QVBR,qp:12</td><td style=text-align:left>2.06x</td></tr><tr><td style=text-align:left>2160p</td><td style=text-align:left>60</td><td style=text-align:left>hevc</td><td style=text-align:left>p010</td><td style=text-align:left>main10,QVBR,qp:12</td><td style=text-align:left>1.81x</td></tr><tr><td style=text-align:left>2160p</td><td style=text-align:left>60</td><td style=text-align:left>av1</td><td style=text-align:left>p010</td><td style=text-align:left>main,VBR,crf:24</td><td style=text-align:left>1.81x</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ffmpeg -hwaccel vaapi -hwaccel_output_format vaapi -i input.mp4 -vf <span class=s1>&#39;scale_vaapi=format=p010&#39;</span> -c:v hevc_vaapi -profile:v main10 -tier high -rc_mode QVBR -qp <span class=m>12</span> -b:v 40M output3.mp4
</span></span></code></pre></div><h2 id=性能测试>性能测试<a hidden class=anchor aria-hidden=true href=#性能测试>#</a></h2><h3 id=gravitymark>GravityMark<a hidden class=anchor aria-hidden=true href=#gravitymark>#</a></h3><p><a href=https://gravitymark.tellusim.com/leaderboard/>统计网站</a></p><ul><li>Vulkan 1920x1080 Asteroids: 200000 Score: <strong>24896</strong></li><li>Opengl 1920x1080 Asteroids: 200000 Score: <strong>20477</strong></li></ul><h3 id=clpeak>clpeak<a hidden class=anchor aria-hidden=true href=#clpeak>#</a></h3><p><a href=https://openbenchmarking.org/test/pts/clpeak>统计网站</a></p><p><code>Single-precision compute</code> 和 4060 差不多<br><code>Half-precision compute</code> 网站没有数据，看下面 <code>vkpeak</code>, 和 4070 super 差不多<br><code>Integer compute</code> 差不多 4060 的一半</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ ./clpeak 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Platform: Intel(R) OpenCL Graphics
</span></span><span class=line><span class=cl>  Device: Intel(R) Graphics [0xe20b]
</span></span><span class=line><span class=cl>    Driver version  : 24.35.30872.32 (Linux x64)
</span></span><span class=line><span class=cl>    Compute units   : 160
</span></span><span class=line><span class=cl>    Clock frequency : 2850 MHz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Global memory bandwidth (GBPS)
</span></span><span class=line><span class=cl>      float   : 417.71
</span></span><span class=line><span class=cl>      float2  : 429.27
</span></span><span class=line><span class=cl>      float4  : 434.78
</span></span><span class=line><span class=cl>      float8  : 446.30
</span></span><span class=line><span class=cl>      float16 : 449.03
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Single-precision compute (GFLOPS)
</span></span><span class=line><span class=cl>      float   : 14083.21
</span></span><span class=line><span class=cl>      float2  : 14401.35
</span></span><span class=line><span class=cl>      float4  : 14096.05
</span></span><span class=line><span class=cl>      float8  : 12096.30
</span></span><span class=line><span class=cl>      float16 : 13596.31
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Half-precision compute (GFLOPS)
</span></span><span class=line><span class=cl>      half   : 24831.84
</span></span><span class=line><span class=cl>      half2  : 28076.27
</span></span><span class=line><span class=cl>      half4  : 28199.86
</span></span><span class=line><span class=cl>      half8  : 27916.44
</span></span><span class=line><span class=cl>      half16 : 27768.14
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Double-precision compute (GFLOPS)
</span></span><span class=line><span class=cl>      double   : 891.12
</span></span><span class=line><span class=cl>      double2  : 893.37
</span></span><span class=line><span class=cl>      double4  : 898.90
</span></span><span class=line><span class=cl>      double8  : 888.26
</span></span><span class=line><span class=cl>      double16 : 842.54
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Integer compute (GIOPS)
</span></span><span class=line><span class=cl>      int   : 4433.77
</span></span><span class=line><span class=cl>      int2  : 4461.17
</span></span><span class=line><span class=cl>      int4  : 4456.32
</span></span><span class=line><span class=cl>      int8  : 4364.93
</span></span><span class=line><span class=cl>      int16 : 4192.12
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Integer compute Fast 24bit (GIOPS)
</span></span><span class=line><span class=cl>      int   : 4473.72
</span></span><span class=line><span class=cl>      int2  : 4448.66
</span></span><span class=line><span class=cl>      int4  : 4470.87
</span></span><span class=line><span class=cl>      int8  : 4379.65
</span></span><span class=line><span class=cl>      int16 : 4225.50
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Integer char (8bit) compute (GIOPS)
</span></span><span class=line><span class=cl>      char   : 21487.19
</span></span><span class=line><span class=cl>      char2  : 26128.29
</span></span><span class=line><span class=cl>      char4  : 25867.58
</span></span><span class=line><span class=cl>      char8  : 25227.17
</span></span><span class=line><span class=cl>      char16 : 24600.19
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Integer short (16bit) compute (GIOPS)
</span></span><span class=line><span class=cl>      short   : 20924.35
</span></span><span class=line><span class=cl>      short2  : 26189.49
</span></span><span class=line><span class=cl>      short4  : 25835.04
</span></span><span class=line><span class=cl>      short8  : 25127.30
</span></span><span class=line><span class=cl>      short16 : 23874.53
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Transfer bandwidth (GBPS)
</span></span><span class=line><span class=cl>      enqueueWriteBuffer              : 6.77
</span></span><span class=line><span class=cl>      enqueueReadBuffer               : 6.71
</span></span><span class=line><span class=cl>      enqueueWriteBuffer non-blocking : 7.08
</span></span><span class=line><span class=cl>      enqueueReadBuffer non-blocking  : 7.01
</span></span><span class=line><span class=cl>      enqueueMapBuffer(for read)      : 6.97
</span></span><span class=line><span class=cl>        memcpy from mapped ptr        : 26.67
</span></span><span class=line><span class=cl>      enqueueUnmap(after write)       : 7.20
</span></span><span class=line><span class=cl>        memcpy to mapped ptr          : 26.41
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Kernel launch latency : 49.15 us
</span></span></code></pre></div><h3 id=vkpeak>vkpeak<a hidden class=anchor aria-hidden=true href=#vkpeak>#</a></h3><p><a href=https://openbenchmarking.org/test/pts/vkpeak>统计网站</a></p><p><code>fp32</code> 和 4060 差不多<br><code>int32</code> 特别差<br>其他的居然能跑到和 4070 super 差不多</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ ./vkpeak 0 
</span></span><span class=line><span class=cl>device       = Intel(R) Graphics (BMG G21)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>fp32-scalar  = 7277.51 GFLOPS
</span></span><span class=line><span class=cl>fp32-vec4    = 10706.95 GFLOPS
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>fp16-scalar  = 21068.69 GFLOPS
</span></span><span class=line><span class=cl>fp16-vec4    = 23754.69 GFLOPS
</span></span><span class=line><span class=cl>fp16-matrix  = 0.00 GFLOPS
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>fp64-scalar  = 799.67 GFLOPS
</span></span><span class=line><span class=cl>fp64-vec4    = 779.47 GFLOPS
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>int32-scalar = 3024.92 GIOPS
</span></span><span class=line><span class=cl>int32-vec4   = 3102.06 GIOPS
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>int16-scalar = 10801.67 GIOPS
</span></span><span class=line><span class=cl>int16-vec4   = 13525.01 GIOPS
</span></span></code></pre></div><h3 id=vkfft>VkFFT<a hidden class=anchor aria-hidden=true href=#vkfft>#</a></h3><p><a href=https://openbenchmarking.org/test/pts/vkfft>统计网站</a></p><ul><li>single precision</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ ./VkFFT_TestSuite -vkfft 0
</span></span><span class=line><span class=cl>0 - VkFFT FFT + iFFT C2C benchmark 1D batched in single precision
</span></span><span class=line><span class=cl>VkFFT System: 3 8x16777216 Buffer: 1024 MB avg_time_per_step: 10.984 ms std_error: 0.054 num_iter: 3 benchmark: 95462 bandwidth: 364.2
</span></span><span class=line><span class=cl>VkFFT System: 4 16x8388608 Buffer: 1024 MB avg_time_per_step: 11.302 ms std_error: 0.378 num_iter: 3 benchmark: 92774 bandwidth: 353.9
</span></span><span class=line><span class=cl>VkFFT System: 5 32x4194304 Buffer: 1024 MB avg_time_per_step: 11.164 ms std_error: 0.332 num_iter: 3 benchmark: 93921 bandwidth: 358.3
</span></span><span class=line><span class=cl>VkFFT System: 6 64x2097152 Buffer: 1024 MB avg_time_per_step: 10.819 ms std_error: 0.024 num_iter: 3 benchmark: 96918 bandwidth: 369.7
</span></span><span class=line><span class=cl>VkFFT System: 7 128x1048576 Buffer: 1024 MB avg_time_per_step: 10.816 ms std_error: 0.022 num_iter: 3 benchmark: 96946 bandwidth: 369.8
</span></span><span class=line><span class=cl>VkFFT System: 8 256x524288 Buffer: 1024 MB avg_time_per_step: 10.918 ms std_error: 0.016 num_iter: 3 benchmark: 96037 bandwidth: 366.4
</span></span><span class=line><span class=cl>VkFFT System: 9 512x262144 Buffer: 1024 MB avg_time_per_step: 10.963 ms std_error: 0.045 num_iter: 3 benchmark: 95645 bandwidth: 364.9
</span></span><span class=line><span class=cl>VkFFT System: 10 1024x131072 Buffer: 1024 MB avg_time_per_step: 10.990 ms std_error: 0.052 num_iter: 3 benchmark: 95414 bandwidth: 364.0
</span></span><span class=line><span class=cl>VkFFT System: 11 2048x65536 Buffer: 1024 MB avg_time_per_step: 11.018 ms std_error: 0.067 num_iter: 3 benchmark: 95172 bandwidth: 363.1
</span></span><span class=line><span class=cl>VkFFT System: 12 4096x32768 Buffer: 1024 MB avg_time_per_step: 10.981 ms std_error: 0.080 num_iter: 3 benchmark: 95486 bandwidth: 364.3
</span></span><span class=line><span class=cl>VkFFT System: 13 8192x16384 Buffer: 1024 MB avg_time_per_step: 11.638 ms std_error: 1.004 num_iter: 3 benchmark: 90095 bandwidth: 343.7
</span></span></code></pre></div><ul><li>half precision</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ ./VkFFT_TestSuite -vkfft 2
</span></span><span class=line><span class=cl>2 - VkFFT FFT + iFFT C2C benchmark 1D batched in half precision
</span></span><span class=line><span class=cl>VkFFT System: 3 8x16777216 Buffer: 512 MB avg_time_per_step: 5.755 ms std_error: 0.054 num_iter: 2 benchmark: 182207 bandwidth: 347.5
</span></span><span class=line><span class=cl>VkFFT System: 4 16x8388608 Buffer: 512 MB avg_time_per_step: 5.855 ms std_error: 0.018 num_iter: 2 benchmark: 179090 bandwidth: 341.6
</span></span><span class=line><span class=cl>VkFFT System: 5 32x4194304 Buffer: 512 MB avg_time_per_step: 6.394 ms std_error: 0.066 num_iter: 2 benchmark: 163989 bandwidth: 312.8
</span></span><span class=line><span class=cl>VkFFT System: 6 64x2097152 Buffer: 512 MB avg_time_per_step: 6.731 ms std_error: 0.127 num_iter: 2 benchmark: 155790 bandwidth: 297.1
</span></span><span class=line><span class=cl>VkFFT System: 7 128x1048576 Buffer: 512 MB avg_time_per_step: 7.127 ms std_error: 0.059 num_iter: 2 benchmark: 147137 bandwidth: 280.6
</span></span><span class=line><span class=cl>VkFFT System: 8 256x524288 Buffer: 512 MB avg_time_per_step: 5.517 ms std_error: 0.100 num_iter: 2 benchmark: 190062 bandwidth: 362.5
</span></span><span class=line><span class=cl>VkFFT System: 9 512x262144 Buffer: 512 MB avg_time_per_step: 5.403 ms std_error: 0.004 num_iter: 2 benchmark: 194084 bandwidth: 370.2
</span></span><span class=line><span class=cl>VkFFT System: 10 1024x131072 Buffer: 512 MB avg_time_per_step: 5.575 ms std_error: 0.168 num_iter: 2 benchmark: 188085 bandwidth: 358.7
</span></span><span class=line><span class=cl>VkFFT System: 11 2048x65536 Buffer: 512 MB avg_time_per_step: 5.560 ms std_error: 0.126 num_iter: 2 benchmark: 188598 bandwidth: 359.7
</span></span><span class=line><span class=cl>VkFFT System: 12 4096x32768 Buffer: 512 MB avg_time_per_step: 5.590 ms std_error: 0.108 num_iter: 2 benchmark: 187580 bandwidth: 357.8
</span></span><span class=line><span class=cl>VkFFT System: 13 8192x16384 Buffer: 512 MB avg_time_per_step: 10.461 ms std_error: 1.182 num_iter: 2 benchmark: 100241 bandwidth: 191.2
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.bluempty.com/tags/%E7%A1%AC%E4%BB%B6/>硬件</a></li><li><a href=https://blog.bluempty.com/tags/linux/>Linux</a></li></ul><nav class=paginav><a class=prev href=https://blog.bluempty.com/post/lineageos-china/><span class=title>« 上一页</span><br><span>国内使用 Lineageos 的问题</span>
</a><a class=next href=https://blog.bluempty.com/post/is-flatpak-package-manager/><span class=title>下一页 »</span><br><span>Flatpak 是包管理吗</span></a></nav></footer></article></main><footer class=footer><span>© 2025 <a href=https://blog.bluempty.com>Bluempty</a> · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=/js/dimbox.min.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>